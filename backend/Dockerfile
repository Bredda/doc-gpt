FROM node:18.15.0

WORKDIR /app


ENV DOCGPT_BACK_PORT=3000
ENV DOCGPT_DB_PORT=5432
ENV DOCGPT_DB_HOST=docgpt-db
ENV DOCGPT_DB_NAME=postgres
ENV DOCGPT_DB_USER=postgres
ENV DOCGPT_DB_PASSWORD=postgres
ENV MOTORHEAD_PORT=8081
ENV MOTORHEAD_HOST=motorhead
ENV DOCGPT_SECRET=@QEGTUI
ENV CHROMA_HOST=chroma


COPY package*.json ./

RUN npm install

COPY . .

RUN chmod +x wait-for-it.sh

EXPOSE 3000

CMD ["npm", "run", "dev"]