<p-fieldset [toggleable]="true">
  <ng-template pTemplate="header">
    <div class="flex align-items-center text-primary">
      <span class="pi pi-folder-open mr-2"></span>
      <span class="font-bold text-lg">Projets</span>
    </div>
  </ng-template>
  <div class="flex flex-column gap-4">
    <p-tree
      [value]="datas"
      emptyMessage="Aucun projet"
      selectionMode="single"
      [(selection)]="selectedNode"
      (onNodeSelect)="navigateToSelectedNode()"
      [contextMenu]="cm">
    </p-tree>
    <p-button
      icon="pi pi-plus"
      (click)="createProjectVisible = true"
      class="align-self-center"
      styleClass="p-button-outlined "
      label="Nouveau projet">
    </p-button>
  </div>
</p-fieldset>

<p-contextMenu #cm [model]="items" (onShow)="onContext()"></p-contextMenu>

<p-dialog
  header="Nouveau projet"
  [(visible)]="createProjectVisible"
  [modal]="true"
  [style]="{width: '50vw'}">
  <!--form [formGroup]="projectForm"-->
  <input
    id="newProjectName"
    type="text"
    placeholder="Nom du projet"
    pInputText
    required
    class="p-inputtext w-full md:w-30rem mb-5"
    style="padding: 1rem"
    [(ngModel)]="newName" />
  <!--/form-->

  <ng-template pTemplate="footer">
    <p-button
      icon="pi pi-times"
      (click)="onCancelCreate()"
      label="Annuler"
      styleClass="p-button-text"></p-button>
    <p-button
      icon="pi pi-check"
      (click)="onConfirmCreate()"
      label="Créer"
      styleClass="p-button-text"></p-button>
  </ng-template>
</p-dialog>
<p-dialog
  header="Nouvelle discussion"
  [(visible)]="createChatVisible"
  [modal]="true"
  [style]="{width: '50vw'}">
  <div class="grid">
    <div class="col-12">
      <div class="p-fluid p-formgrid grid">
        <div class="field col-fixed" style="width: 400px">
          <label htmlFor="newChatName">Nom de la discussion</label>
          <input
            class="p-inputtext"
            pInputText
            id="newChatName"
            type="text"
            required
            [(ngModel)]="newName" />
        </div>
        <div class="col"></div>
      </div>
      <div class="p-fluid p-formgrid grid">
        <div class="field col-12 md:col-6">
          <label htmlFor="type">Type</label>
          <p-dropdown
            id="type"
            appendTo="body"
            [options]="types"
            optionLabel="name"
            [(ngModel)]="selectedType"></p-dropdown>
        </div>
        <div class="field col-12 md:col-3">
          <label htmlFor="langue">Langue</label>
          <p-dropdown
            id="langue"
            appendTo="body"
            [options]="languages"
            optionLabel="name"
            [(ngModel)]="selectedLanguage"></p-dropdown>
        </div>
        <div class="field col-12 md:col-3">
          <label htmlFor="model">Model</label>
          <p-dropdown
            id="model"
            appendTo="body"
            [options]="models"
            optionLabel="name"
            [(ngModel)]="selectedModel"></p-dropdown>
        </div>
      </div>
    </div>
  </div>
  <ng-template pTemplate="footer">
    <p-button
      icon="pi pi-times"
      (click)="onCancelCreateChat()"
      label="Annuler"
      styleClass="p-button-text"></p-button>
    <p-button
      icon="pi pi-check"
      (click)="onConfirmCreateChat()"
      label="Créer"
      styleClass="p-button-text"></p-button>
  </ng-template>
</p-dialog>
<p-confirmDialog [style]="{width: '50vw'}"></p-confirmDialog>
<p-toast></p-toast>
